"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[619],{7673:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(1609),r=n(8468);const o=({height:e="80px"})=>{const t={"--wnd-ai-logo-size":e,height:`var(--wnd-ai-logo-size, ${e})`};return(0,r.useEffect)((()=>{document.querySelectorAll("[data-wnd-ai-logo]").forEach((function(e){let t=!1,n=null;const a=()=>{t?document.body.classList.add("wnd-ai-logo-keydown"):document.body.classList.remove("wnd-ai-logo-keydown"),n=null};e.addEventListener("keydown",(function(){t||(t=!0,n||(n=window.requestAnimationFrame(a)))})),e.addEventListener("keyup",(function(){t=!1,n||(n=window.requestAnimationFrame(a))}))}))}),[]),(0,a.createElement)("span",{className:"wnd-ai-logo",style:t},(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--bg"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--1"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--2"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--3"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--4"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--5"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--6"}),(0,a.createElement)("span",{className:"wnd-ai-logo__spinner"}))}},8844:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(1609),r=n(8468),o=n(9491),i=n(7143),s=n(7723);var l=n(6427),d=n(7675),c=n(3988),g=n(7673),_=n(8744),u=n(2940),m=n(9861),p=n(148),b=n(8969);const w=()=>{const e=(0,p.Zp)(),{setIsHeaderEnabled:t,setSidebarActiveView:n,setHeaderActiveView:w,setDrawerActiveView:f,setHideFooterNav:E,setIsHeaderNavigationEnabled:h,updateAllSteps:v,updateTopSteps:y,updateRoutes:N,updateDesignRoutes:S,updateInitialize:C,setCurrentOnboardingData:k,updateSiteGenErrorStatus:x}=(0,i.useDispatch)(d.M);(0,r.useEffect)((()=>{E(!0),t(!0),n(!1),w(b.Ix),h(!0),f(!1)}));const{brandConfig:A,currentData:F}=(0,i.useSelect)((e=>({brandConfig:e(d.M).getNewfoldBrandConfig(),currentData:e(d.M).getCurrentOnboardingData()}))),D=(0,o.useViewportMatch)("small"),I={heading:(0,s.__)("Sorry, we're having trouble communicating with our AI service.","wp-module-onboarding"),subHeading:(0,s.__)("Do you keep getting this error?","wp-module-onboarding"),message:(0,s.__)("If you continue to get this error, you may either continue creating your site without using our AI assistant, or you can ","wp-module-onboarding"),buttonText:(0,s.__)("Try again","wp-module-onboarding"),buttonSkip:(0,s.__)("Continue without AI","wp-module-onboarding"),buttonExit:(0,s.__)("exit to WordPress","wp-module-onboarding")},G=window.nfdOnboarding?.oldFlow?window.nfdOnboarding.oldFlow:_.rA,O=()=>{x(!1)};return(0,a.createElement)(c.A,{className:"nfd-onboarding-step--site-gen__error"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__orb"},(0,a.createElement)(g.A,{height:"100px"})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__heading__text"},I.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__text"},I.subHeading),(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__message"},I.message,(0,a.createElement)("a",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__exit",href:b.R0},I.buttonExit))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__buttons"},(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__skip",onClick:()=>{(t=>{if(!(0,u.nC)(A,t))return!1;const n=window.nfdOnboarding.currentFlow,a=(0,m.Sg)(t)();v(a.steps),y(a?.topSteps),N(a.routes),S(a?.designRoutes),_.d0!==n&&(window.nfdOnboarding.oldFlow=n),window.nfdOnboarding.currentFlow=t,F.activeFlow=t,k(F),_.d0!==t&&C(!0),e(a.steps[1].path)})(G)}},I.buttonSkip),D?(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{O()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},I.buttonText)):(0,a.createElement)(l.Fill,{name:`${b.Sr}/${b.gb}`},(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{O()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},I.buttonText))))))},f=({children:e})=>{const{siteGenErrorStatus:t}=(0,i.useSelect)((e=>({siteGenErrorStatus:e(d.M).getSiteGenErrorStatus()})));return(0,a.createElement)(r.Fragment,null,t?(0,a.createElement)(w,null):e)}},619:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var a=n(1609),r=n(8468),o=n(7143),i=n(148),s=n(6087),l=n(3988),d=n(7675),c=n(8969),g=n(7044),_=n(7723);const u=()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"24",viewBox:"-5 -2 36 24",fill:"none",className:"heart"},(0,a.createElement)("g",{id:"State=Active"},(0,a.createElement)("path",{id:"Vector",d:"M10 19.1585L8.975 18.2335C7.20833 16.6168 5.75 15.221 4.6 14.046C3.45 12.871 2.53333 11.821 1.85 10.896C1.16667 9.971 0.6875 9.1335 0.4125 8.3835C0.1375 7.6335 0 6.87516 0 6.1085C0 4.6085 0.504167 3.35433 1.5125 2.346C2.52083 1.33766 3.76667 0.833496 5.25 0.833496C6.2 0.833496 7.07917 1.0585 7.8875 1.5085C8.69583 1.9585 9.4 2.6085 10 3.4585C10.7 2.5585 11.4417 1.896 12.225 1.471C13.0083 1.046 13.85 0.833496 14.75 0.833496C16.2333 0.833496 17.4792 1.33766 18.4875 2.346C19.4958 3.35433 20 4.6085 20 6.1085C20 6.87516 19.8625 7.6335 19.5875 8.3835C19.3125 9.1335 18.8333 9.971 18.15 10.896C17.4667 11.821 16.55 12.871 15.4 14.046C14.25 15.221 12.7917 16.6168 11.025 18.2335L10 19.1585Z",fill:"#EF4A71"}))),m=function({count:e=1,isRegenerating:t}){const n=[];for(let r=0;r<e;r++)n.push((0,a.createElement)("div",{key:r,className:"regenerating-site-card-wrap"},(0,a.createElement)("div",{className:"regenerating-site-card"},(0,a.createElement)("p",{className:"regenerating-site-card__title"},t?(0,_.__)("Regenerating Site","wp-module-onboarding"):(0,_.__)("Generating Site","wp-module-onboarding")),(0,a.createElement)("div",{className:"regenerating-site-card__progress-bar"},(0,a.createElement)("div",{style:{animationDuration:2e3*Math.random()+1500+"ms"},className:"regenerating-site-card__progress-bar__fill"})))));return(0,a.createElement)(a.Fragment,null,n)};var p=n(7708),b=n(7517),w=n(8844),f=n(431);const E=()=>{const e=(0,i.Zp)(),[t,n]=(0,r.useState)(!1),[E,h]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[N,S]=(0,r.useState)(!1),C=(0,r.useRef)(),{setIsHeaderEnabled:k,setSidebarActiveView:x,setHeaderActiveView:A,setDrawerActiveView:F,setCurrentOnboardingData:D,updateInitialize:I,setHideFooterNav:G,updateSiteGenErrorStatus:O,setIsHeaderNavigationEnabled:R}=(0,o.useDispatch)(d.M),{currentData:H,nextStep:M,siteGenErrorStatus:V}=(0,o.useSelect)((e=>({currentData:e(d.M).getCurrentOnboardingData(),nextStep:e(d.M).getNextStep(),siteGenErrorStatus:e(d.M).getSiteGenErrorStatus()})));(0,r.useEffect)((()=>{k(!0),G(!0),x(!1),A(c.Ix),F(!1),I(!0),R(!1)}),[H]),(0,r.useEffect)((()=>{!0===C.current&&!1===V&&(B(),T()),C.current=V}),[V]);const B=async()=>{if(y(!0),!(0,s.isEmpty)(H.sitegen.homepages.data))return n(H.sitegen.homepages.data),void y(!1);if(""===H.sitegen.siteDetails?.prompt)return void y(!1);const e=await(0,p.c7)(H.sitegen.siteDetails.prompt);if(e.error)return y(!1),void O(!0);H.sitegen.homepages.data=e.body,n(e.body),D(H),y(!1)},T=async()=>{const e=await(0,b.w6)();e.error?y(!1):S(e.body)};(0,r.useEffect)((()=>{B(),T()}),[]);const L=n=>{if(!(n in t))return!1;H.sitegen.homepages.active=t[n],H.sitegen.skipCache=!1,D(H),e(M.path)},q=e=>{if(!(e in t))return;const a=!t[e].isFavorite;t[e].isFavorite=a,H.sitegen.homepages.data=t,n(t),D(H)},z=async(e,a,r)=>{if(document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")&&document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")[0].scrollIntoView({behavior:"smooth",block:"end"}),h(!0),!(e in t))return void h(!1);if(""===H.sitegen.siteDetails?.prompt)return void h(!1);const o=await(0,p.HA)(H.sitegen.siteDetails.prompt,e,a,r);if(o.error)return void h(!1);const i=o.body;t[i.slug]=i,H.sitegen.homepages.data=t,n(t),D(H),h(!1)},Z={heading:(0,_.__)("Presto, here are 3 versions","wp-module-onboarding"),subheading:(0,_.__)("We've created 3 unique website designs for you to start with, preview click around or start over.","wp-module-onboarding"),favouriteNote:(0,_.__)("Favorite a generated version to find and use again in the future.","wp-module-onboarding"),generating:(0,_.__)("Generating Site","wp-module-onboarding"),regenerating:(0,_.__)("Regenerating Site","wp-module-onboarding")};return(0,a.createElement)(w.A,null,(0,a.createElement)(l.A,{className:"nfd-onboarding-step--site-gen__preview"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container"},!v&&(0,a.createElement)(f.A,{type:"fade-in"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__heading__text"},Z.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading__text"},Z.subheading)))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__options"},t&&N&&!v?Object.keys(t).map(((e,n)=>{const r=t[e],o=(0,s.cloneDeep)(N[0]);o.settings.color.palette=r.color.palette;const i=r.styles?.blocks[0]?.["core/body"].typography.fontFamily,l=r.styles?.blocks[0]?.["core/heading"].typography.fontFamily;o.styles.typography&&(o.styles.typography.fontFamily=i),o.styles.blocks["core/heading"].typography&&(o.styles.blocks["core/heading"].typography.fontFamily=l);let d="";return["header","content","footer"].forEach((e=>{e in r&&(d+=r[e])})),(0,a.createElement)(g.GZ,{key:n,blockGrammar:d,previewSettings:o,slug:e,title:r.title,isFavorite:r.isFavorite,palette:r.color,styling:"custom",overlay:!0,tabIndex:"0",role:"button",handleFavorite:q,handleRegenerate:z,handlePreview:L,isRegenerating:E})})):(0,a.createElement)(m,{count:3,isRegenerating:!1}),E&&(0,a.createElement)(m,{count:1,isRegenerating:!0})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__note"},(0,a.createElement)(u,null),(0,a.createElement)("span",null,Z.favouriteNote))))}}}]);