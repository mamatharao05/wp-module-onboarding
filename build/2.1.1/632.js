"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[632],{8053:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1609),o=n(5573);const i=(0,a.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(o.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))},6999:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(1609),o=n(6942),i=n.n(o),r=n(148),s=n(7143),l=n(6427),d=n(7677),c=n(6655),_=n(7675);const g=({text:e,className:t,callback:n=null,disabled:o=!1,showChevronRight:g=!0})=>{const u=(0,r.Zp)(),{nextStep:m}=(0,s.useSelect)((e=>({nextStep:e(_.M).getNextStep()})));return(0,a.createElement)(l.Button,{className:i()("nfd-onboarding-button--site-gen-next",{"nfd-onboarding-button--site-gen-next--disabled":o},t),onClick:()=>{o||(n&&"function"==typeof n&&n(),m&&u(m.path))}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},e),g&&(0,a.createElement)(d.A,{className:"nfd-onboarding-button--site-gen-next--icon",icon:c.A}))}},513:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1609),o=n(8468),i=n(7673);const r=(0,o.memo)((({title:e})=>(0,a.createElement)("div",{className:"ai-heading"},(0,a.createElement)(i.A,{height:"40px"}),(0,a.createElement)("div",{className:"ai-heading--title"},e))))},7673:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1609),o=n(8468);const i=({height:e="80px"})=>{const t={"--wnd-ai-logo-size":e,height:`var(--wnd-ai-logo-size, ${e})`};return(0,o.useEffect)((()=>{document.querySelectorAll("[data-wnd-ai-logo]").forEach((function(e){let t=!1,n=null;const a=()=>{t?document.body.classList.add("wnd-ai-logo-keydown"):document.body.classList.remove("wnd-ai-logo-keydown"),n=null};e.addEventListener("keydown",(function(){t||(t=!0,n||(n=window.requestAnimationFrame(a)))})),e.addEventListener("keyup",(function(){t=!1,n||(n=window.requestAnimationFrame(a))}))}))}),[]),(0,a.createElement)("span",{className:"wnd-ai-logo",style:t},(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--bg"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--1"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--2"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--3"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--4"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--5"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--6"}),(0,a.createElement)("span",{className:"wnd-ai-logo__spinner"}))}},2607:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(1609),o=n(7723),i=n(8468),r=n(6427),s=n(7143),l=n(148),d=n(4371),c=n(6079),_=n(7675),g=n(2014),u=n(8969),m=n(2202),p=n(6942),b=n.n(p);const w=(0,i.memo)((({callback:e=!1,className:t,text:n})=>{const i=(0,l.Zp)(),p=(0,l.zy)(),{nextStep:w,currentData:f,socialData:h}=(0,s.useSelect)((e=>({nextStep:e(_.M).getNextStep(),currentData:e(_.M).getCurrentOnboardingData(),socialData:e(_.M).getOnboardingSocialData()})),[]),E=null===w||!1===w,{setOnboardingSocialData:v}=(0,s.useDispatch)(_.M);return(0,a.createElement)(r.Button,{className:b()("skip-button",t),onClick:E?()=>async function(e){if(f){if(f.isComplete=(new Date).getTime(),e?.includes("basic-info")){const e=await async function(){const e=await(0,g.mt)(),t=await(0,g.oc)(h);return null!==t?.error?e?.body:t?.body}();e&&v(e),await d.y.dispatchEvents(m.XJ)}(0,c.V1)(f)}window.location.replace(u.R0)}(p.pathname):()=>("function"==typeof e&&e(),void i(w.path))},n||(0,o.__)("Skip this Step","wp-module-onboarding"))}))},8844:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(1609),o=n(8468),i=n(9491),r=n(7143),s=n(7723);var l=n(6427),d=n(7675),c=n(3988),_=n(7673),g=n(8744),u=n(2940),m=n(9861),p=n(148),b=n(8969);const w=()=>{const e=(0,p.Zp)(),{setIsHeaderEnabled:t,setSidebarActiveView:n,setHeaderActiveView:w,setDrawerActiveView:f,setHideFooterNav:h,setIsHeaderNavigationEnabled:E,updateAllSteps:v,updateTopSteps:N,updateRoutes:x,updateDesignRoutes:S,updateInitialize:y,setCurrentOnboardingData:D,updateSiteGenErrorStatus:A}=(0,r.useDispatch)(d.M);(0,o.useEffect)((()=>{h(!0),t(!0),n(!1),w(b.Ix),E(!0),f(!1)}));const{brandConfig:k,currentData:C}=(0,r.useSelect)((e=>({brandConfig:e(d.M).getNewfoldBrandConfig(),currentData:e(d.M).getCurrentOnboardingData()}))),L=(0,i.useViewportMatch)("small"),M={heading:(0,s.__)("Sorry, we're having trouble communicating with our AI service.","wp-module-onboarding"),subHeading:(0,s.__)("Do you keep getting this error?","wp-module-onboarding"),message:(0,s.__)("If you continue to get this error, you may either continue creating your site without using our AI assistant, or you can ","wp-module-onboarding"),buttonText:(0,s.__)("Try again","wp-module-onboarding"),buttonSkip:(0,s.__)("Continue without AI","wp-module-onboarding"),buttonExit:(0,s.__)("exit to WordPress","wp-module-onboarding")},F=window.nfdOnboarding?.oldFlow?window.nfdOnboarding.oldFlow:g.rA,B=()=>{A(!1)};return(0,a.createElement)(c.A,{className:"nfd-onboarding-step--site-gen__error"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__orb"},(0,a.createElement)(_.A,{height:"100px"})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__heading__text"},M.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__text"},M.subHeading),(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__message"},M.message,(0,a.createElement)("a",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__exit",href:b.R0},M.buttonExit))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__buttons"},(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__skip",onClick:()=>{(t=>{if(!(0,u.nC)(k,t))return!1;const n=window.nfdOnboarding.currentFlow,a=(0,m.Sg)(t)();v(a.steps),N(a?.topSteps),x(a.routes),S(a?.designRoutes),g.d0!==n&&(window.nfdOnboarding.oldFlow=n),window.nfdOnboarding.currentFlow=t,C.activeFlow=t,D(C),g.d0!==t&&y(!0),e(a.steps[1].path)})(F)}},M.buttonSkip),L?(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{B()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},M.buttonText)):(0,a.createElement)(l.Fill,{name:`${b.Sr}/${b.gb}`},(0,a.createElement)(l.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{B()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},M.buttonText))))))},f=({children:e})=>{const{siteGenErrorStatus:t}=(0,r.useSelect)((e=>({siteGenErrorStatus:e(d.M).getSiteGenErrorStatus()})));return(0,a.createElement)(o.Fragment,null,t?(0,a.createElement)(w,null):e)}},5632:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var a=n(1609),o=n(9491),i=n(8468),r=n(7143),s=n(3582),l=n(7723);var d=n(8969),c=n(2607),_=n(7675),g=n(513),u=n(3988),m=n(6999),p=n(9645),b=n(6478),w=n(9269),f=n(6942),h=n.n(f),E=n(5508),v=n.n(E),N=n(7677),x=n(8053);const S=(0,i.memo)((({image:e,imageSetter:t})=>{const n=(0,i.useRef)(null),{theme:o}=(0,i.useContext)(w.D),[s,c]=(0,i.useState)(!1),[g,u]=(0,i.useState)(!1),{updateSiteGenErrorStatus:m}=(0,r.useDispatch)(_.M);async function f(e){if(e){c(!0);const n=await(0,p.V)(e);if(!n?.body)return m(!0),c(!1);const a=n.body?.id,o=n.body?.source_url;t({id:a,url:o,fileName:e?.name,fileSize:e?.size})}c(!1)}const E=!s&&0!==e?.id&&void 0!==e?.id;return(0,a.createElement)("div",{className:`nfd-onboarding-image-uploader--with-text ${g&&"nfd-onboarding-image-uploader--with-text--on-drag"} ${E&&"nfd-onboarding-image-uploader--with-text--not-dashed"}`,onDrop:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!1),e?.dataTransfer?.files&&e?.dataTransfer?.files.length>0&&"image"===e?.dataTransfer?.files[0]?.type.split("/")[0]&&f(e?.dataTransfer?.files[0])})(e),onDragOver:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!0)})(e),onDragEnter:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!0)})(e),onDragLeave:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!1)})(e)},s?(0,a.createElement)(b.A,null):(0,a.createElement)(a.Fragment,null,!E&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__heading"},(0,a.createElement)("div",{className:h()("nfd-onboarding-image-uploader--with-text__heading__icon",o===d.Vw?"nfd-onboarding-image-uploader--with-text__heading__icon--light":null)}),(0,a.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__heading__text"},(0,a.createElement)("span",{className:"nfd-onboarding-image-uploader--with-text__heading__text__drop"},(0,l.__)("Drop your logo here, or ","wp-module-onboarding")),(0,a.createElement)("button",{onClick:()=>{n?.current.click()},className:"nfd-onboarding-image-uploader--with-text__heading__text__modal"},(0,l.__)("browse","wp-module-onboarding")),(0,a.createElement)("input",{className:"nfd-onboarding-image-uploader--with-text__heading__text__input",accept:"image/*",type:"file",ref:n,onChange:e=>{e?.target?.files&&e?.target?.files.length>0&&f(e?.target?.files[0])}}))),(0,a.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__subheading"},(0,a.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__subheading__text"},(0,l.__)("supports .jpg, .png, .gif","wp-module-onboarding")))),E&&(0,a.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview"},(0,a.createElement)("img",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__image",src:e.url,alt:(0,l.__)("Site Logo Preview","wp-module-onboarding")}),(0,a.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details"},(0,a.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filename"},e.fileName),(0,a.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filesize"},v()(e.fileSize))),(0,a.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset"},(0,a.createElement)("button",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button",onClick:()=>{t({id:0,url:""}),n?.current?.files.length>0&&(n.current.value="")}},(0,a.createElement)(N.A,{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button__icon",icon:x.A}))))))}));var y=n(8844);const D=()=>{const[e,t]=(0,i.useState)(),n=(0,o.useViewportMatch)("small"),{currentData:p}=(0,r.useSelect)((e=>({currentData:e(_.M).getCurrentOnboardingData()}))),{editEntityRecord:b}=(0,r.useDispatch)(s.store),{getEditedEntityRecord:w}=(0,r.useSelect)((e=>e(s.store)),[]),{setIsFooterNavAllowed:f,setIsHeaderEnabled:h,setSidebarActiveView:E,setHeaderActiveView:v,setDrawerActiveView:N,setHideFooterNav:x,setCurrentOnboardingData:D,setIsHeaderNavigationEnabled:A}=(0,r.useDispatch)(_.M);(0,i.useEffect)((()=>{if(x(!1),h(!0),E(!1),A(!0),v(d.Ix),N(!1),0!==p.data.siteLogo?.id)return f(!0),t(p.data.siteLogo);f(!1),w("root","site")}),[]);const k={heading:(0,l.__)("Do you have a logo you would like to use for this site?","wp-module-onboarding"),imageUploader:{subHeading:(0,l.__)("supports .jpg, .png, .svg","wp-module-onboarding")},buttons:{skip:(0,l.__)("Skip for now","wp-module-onboarding"),next:(0,l.__)("Next","wp-module-onboarding")}};return(0,a.createElement)(y.A,null,(0,a.createElement)(u.A,{isCentered:!0,className:"nfd-onboarding-step--site-gen__site-logo"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container"},(0,a.createElement)(g.A,{title:k.heading}),(0,a.createElement)(S,{image:e,imageSetter:e=>{const n={...p};n.data.siteLogo.id=e.id,n.data.siteLogo.url=e.url,n.data.siteLogo.fileName=e.fileName,n.data.siteLogo.fileSize=e.fileSize,D(n),f(0!==e.id),b("root","site",void 0,{site_logo:e.id}),t(e)}}),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container__buttons"},(0,a.createElement)(c.A,{callback:()=>(()=>{const e={...p};e.sitegen.siteLogo={id:0,url:"",fileName:"",fileSize:0},D(e),t(void 0),f(!1)})(),className:"nfd-onboarding-step--site-gen__site-logo__container__buttons__skip",text:k.buttons.skip}),n&&(0,a.createElement)(m.A,{text:k.buttons.next,disabled:void 0===e||0===e?.id})))))}},9645:(e,t,n)=>{n.d(t,{V:()=>s});var a=n(5435),o=n(8674),i=n(1455),r=n.n(i);async function s(e){const t=await function(e){return new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("loadend",(e=>t(e.target.result))),a.addEventListener("error",n),a.readAsArrayBuffer(e)}))}(e),n={"Content-Type":"image/png"};return n["Content-Disposition"]="attachment; filename="+e.name,await(0,a.h)(r()({url:(0,o.zV)("media"),method:"POST",headers:n,body:t}))}},5508:e=>{e.exports=function(e,t){return"string"==typeof e?r(e):"number"==typeof e?i(e,t):null},e.exports.format=i,e.exports.parse=r;var t=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,a={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,o){if(!Number.isFinite(e))return null;var i=Math.abs(e),r=o&&o.thousandsSeparator||"",s=o&&o.unitSeparator||"",l=o&&void 0!==o.decimalPlaces?o.decimalPlaces:2,d=Boolean(o&&o.fixedDecimals),c=o&&o.unit||"";c&&a[c.toLowerCase()]||(c=i>=a.pb?"PB":i>=a.tb?"TB":i>=a.gb?"GB":i>=a.mb?"MB":i>=a.kb?"KB":"B");var _=(e/a[c.toLowerCase()]).toFixed(l);return d||(_=_.replace(n,"$1")),r&&(_=_.split(".").map((function(e,n){return 0===n?e.replace(t,r):e})).join(".")),_+s+c}function r(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=o.exec(e),i="b";return n?(t=parseFloat(n[1]),i=n[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(a[i]*t)}}}]);