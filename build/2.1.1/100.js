"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[100],{1100:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var o=a(1609),n=a(8468),l=a(7143),r=a(6427),c=a(3957);const s=({idx:e,label:t,selectedPalette:a,setSelectedPalette:n,setSelectedColor:l,colors:r,setShowCustomColors:c=null})=>{const s=`conic-gradient(${r[e].primary} 90deg, ${r[e].secondary} 90deg 150deg, ${r[e].tertiary} 150deg 330deg, ${r[e].primary} 330deg 360deg)`,i="nfd-onboarding-sidebar--customize__color-palette-icon";return(0,o.createElement)("div",{className:`${i}__container`},(0,o.createElement)("div",{role:"presentation",className:a===e?`${i}__container__icon__selected`:`${i}__container__icon`,style:{background:s},onClick:()=>{n(e),l(r[e]),c&&c(!1)}}),(0,o.createElement)("p",null,t))};var i=a(7723);const m=({onChange:e,palettePrimaryColors:t})=>{const[a,l]=(0,n.useState)(t[0].color),c=[{colors:t,name:(0,i.__)("THEME","wp-module-onboarding")}];return(0,o.createElement)(r.Popover,{placement:"left"},(0,o.createElement)("div",{className:"nfd-onboarding-sidebar--customize__custom-color-palette__container"},(0,o.createElement)(r.ColorPalette,{colors:c,value:a,onChange:t=>{l(t),e(t)}})))};var d=a(7675),u=a(6087);const _=(0,o.forwardRef)((({baseClassName:e="nfd-onboarding-sidebar--customize__design-colors-panel",heading:t},a)=>{const _=()=>{x(0),P(y[0]),$(!1)};(0,o.useImperativeHandle)(a,(()=>({resetToDefaultColors:_})));const{currentData:p,customizeSidebarData:g,themeColors:b}=(0,l.useSelect)((e=>({currentData:e(d.M).getCurrentOnboardingData(),customizeSidebarData:e(d.M).getCustomizeSidebarData(),themeColors:e(d.M).getPreviewSettings().settings.colors})));(0,n.useEffect)((()=>{const e=p.sitegen?.homepages?.active?.slug;let t=p.sitegen.homepages.active.color.defaultPalette;t||(t=(0,u.cloneDeep)(p.sitegen.homepages.active.color.palette),p.sitegen.homepages.data[e].color.defaultPalette=t,p.sitegen.homepages.active.color.defaultPalette=t,B(p))}),[p]);const h=g?.colorPalettes;let E=b?.map((e=>({name:e.name,color:e.color})));E||(E=Object.entries(h[0]).map((([,e])=>({name:(0,i.__)("Custom","wp-module-onboarding"),color:e}))));const C=(()=>{const e=[],t=p?.sitegen?.homepages?.active?.color?.defaultPalette||p?.sitegen?.homepages?.active?.color?.palette;return h.forEach((a=>{let o=!0;["primary","base","tertiary"].forEach((e=>{const n=a[e],l=t.find((t=>t.slug===e))?.color;n!==l&&(o=!1)}));const n={primary:a?.primary,secondary:a?.secondary||a?.base,tertiary:a?.tertiary||a?.primary,isDefault:o};o?e.unshift(n):e.push(n)})),e})(),[y]=(0,n.useState)(C),[f,v]=(0,n.useState)(null),[S,P]=(0,n.useState)({}),[w,$]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),[O,D]=(0,n.useState)(!1),[M,x]=(0,n.useState)(null),[z,T]=(0,n.useState)(""),[R,j]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=p.sitegen.homepages.active.color;if(!f){const t=e.customColors;v(t||C[0])}if(!M&&0!==M){const t=e.selectedPalette||0;x(t),"custom"===t&&($(!0),D(!0))}}),[p]);const A=e=>{j(!R),T(R?"":e)},{setCurrentOnboardingData:B}=(0,l.useDispatch)(d.M);(0,n.useEffect)((()=>{0!==Object.keys(S).length&&null!==M&&(()=>{const e=p.sitegen?.homepages?.active?.slug;if(!e)return;const t=p.sitegen.homepages.active.color;"custom"===M&&(t.customColors=S),t.selectedPalette=M;const a=h["custom"===M?0:M];a.primary=S.primary,a.secondary=S.secondary,a.base=S.secondary,a.tertiary=S.tertiary,t.palette=(e=>{const t=[];for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const o=a.replace(/_/g,"-"),n=e[a],l=a.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");t.push({slug:o,color:n,name:l})}return t})(a),p.sitegen.homepages.data[e].color=t,B(p)})()}),[S,M]);return(0,o.createElement)(r.PanelBody,{className:e,initialOpen:!0},(0,o.createElement)(r.PanelRow,null,(0,o.createElement)("div",{className:`${e}__container`},(0,o.createElement)("div",{className:`${e}__container__text`},(0,o.createElement)("p",{className:`${e}__container__text__heading`},(0,o.createElement)("strong",null,t)),(0,o.createElement)("div",{className:`${e}__container__color__palette__icon`},y.map(((e,t)=>(0,o.createElement)(s,{key:t,idx:t,label:0===t?(0,i.__)("Default","wp-module-onboarding"):"",selectedPalette:M,setSelectedPalette:x,setSelectedColor:P,colors:y,setShowCustomColors:$}))))))),(0,o.createElement)(r.PanelRow,null,!w&&(0,o.createElement)("div",{className:`${e}__custom__colors__button__container`},(0,o.createElement)(r.Button,{onClick:()=>(x("custom"),P(f),$(!0),void(O||k(!0)))},(0,i.__)("Pick your own colors","wp-module-onboarding"))),w&&N&&(0,o.createElement)("div",{className:`${e}__custom__colors__container`},(0,o.createElement)("h5",{className:`${e}__heading`},(0,i.__)("CUSTOM COLORS","wp-module-onboarding")),(0,o.createElement)("div",null,["primary","secondary","tertiary"].map(((e,t)=>(0,o.createElement)(c.A,{key:t,isColorSelected:S,color:S[e],slug:e,name:e.charAt(0).toUpperCase()+e.slice(1),callback:A})))),(0,o.createElement)("div",{className:`${e}__custom__colors__container__buttons`},(0,o.createElement)(r.Button,{onClick:()=>{O?k(!1):$(!1)},className:"cancel"},(0,i.__)("Cancel","wp-module-onboarding")),(0,o.createElement)(r.Button,{onClick:()=>{D(!0),k(!1),x("custom"),v(S)},variant:"primary"},(0,i.__)("Apply","wp-module-onboarding"))),R&&(0,o.createElement)(m,{onChange:e=>{const t={...S};t[z]=e,P(t)},palettePrimaryColors:E})),w&&!N&&(0,o.createElement)("div",{className:`${e}__custom-color-palette__container`},(0,o.createElement)("div",{className:`${e}__custom-color-palette__container__header`},(0,o.createElement)("h5",{className:`${e}__heading`},(0,o.createElement)("span",null,(0,i.__)("CUSTOM COLORS","wp-module-onboarding"))),(0,o.createElement)("button",{onClick:()=>(x("custom"),P(f),void k(!0))},(0,i.__)("Edit colors","wp-module-onboarding"))),(0,o.createElement)("div",{style:{marginLeft:"5px"}},(0,o.createElement)(s,{key:"custom",idx:"custom",selectedPalette:M,setSelectedPalette:x,setSelectedColor:P,colors:{custom:f}})))))}))}}]);