"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[659],{7231:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(9307),i=a(444);const o=(0,n.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(i.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))},9978:(e,t,a)=>{a.d(t,{Z:()=>g});var n=a(9307),i=a(4184),o=a.n(i),l=a(9250),r=a(9818),d=a(5609),s=a(1984),u=a(5024),c=a(4403);const g=e=>{let{text:t,className:a,callback:i=null,disabled:g=!1,icon:_=!0}=e;const m=(0,l.s0)(),{nextStep:p}=(0,r.useSelect)((e=>({nextStep:e(c.h).getNextStep()})));return(0,n.createElement)(d.Button,{className:o()("nfd-onboarding-button--site-gen-next",{"nfd-onboarding-button--site-gen-next--disabled":g},a),onClick:()=>{g||(i&&"function"==typeof i&&i(),p&&m(p.path))}},t,_&&(0,n.createElement)(s.Z,{className:"nfd-onboarding-button--site-gen-next--icon",icon:u.Z}))}},3467:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(9307);const i=e=>{let{title:t}=e;return(0,n.createElement)("div",{className:"ai-heading"},(0,n.createElement)("div",{className:"ai-heading--icon"}),(0,n.createElement)("div",{className:"ai-heading--title"},t))}},676:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(9307),i=a(5736),o=a(5609),l=a(9818),r=a(9250),d=a(7207),s=a(7533),u=a(4403),c=a(8395),g=a(2200),_=a(6342),m=a(4184),p=a.n(m);const b=(0,n.memo)((e=>{let{callback:t=!1,className:a,text:m}=e;const b=(0,r.s0)(),f=(0,r.TH)(),{nextStep:v,currentData:h,socialData:w}=(0,l.useSelect)((e=>({nextStep:e(u.h).getNextStep(),currentData:e(u.h).getCurrentOnboardingData(),socialData:e(u.h).getOnboardingSocialData()})),[]),x=null===v||!1===v,{setOnboardingSocialData:E}=(0,l.useDispatch)(u.h);return(0,n.createElement)(o.Button,{className:p()("skip-button",a),onClick:x?()=>async function(e){if(h){if(h.isComplete=(new Date).getTime(),null!=e&&e.includes("basic-info")){const e=await async function(){const e=await(0,c.Gw)(),t=await(0,c.I2)(w);return null!==(null==t?void 0:t.error)?null==e?void 0:e.body:null==t?void 0:t.body}();e&&E(e),await d.v.dispatchEvents(_.En)}(0,s.kB)(h)}window.location.replace(g.br)}(f.pathname):()=>("function"==typeof t&&t(),void b(v.path))},m||(0,i.__)("Skip this Step","wp-module-onboarding"))}))},1659:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(9307),i=a(4333),o=a(9818),l=a(7798),r=a(5736);var d=a(2200),s=a(676),u=a(4403),c=a(3467),g=a(5634),_=a(9978),m=a(2964),p=a(4310),b=a(6372),f=a(4184),v=a.n(f),h=a(9830),w=a.n(h),x=a(1984),E=a(7231);const N=(0,n.memo)((e=>{let{image:t,imageSetter:a}=e;const i=(0,n.useRef)(null),{theme:o}=(0,n.useContext)(b.N),[l,s]=(0,n.useState)(!1),[u,c]=(0,n.useState)(!1);async function g(e){if(e){var t,n;s(!0);const i=await(0,m.I)(e);if(null==i||!i.body)return s(!1);const o=null===(t=i.body)||void 0===t?void 0:t.id,l=null===(n=i.body)||void 0===n?void 0:n.source_url;a({id:o,url:l,fileName:null==e?void 0:e.name,fileSize:null==e?void 0:e.size})}s(!1)}const _=!l&&0!==(null==t?void 0:t.id)&&void 0!==(null==t?void 0:t.id);return(0,n.createElement)("div",{className:`nfd-onboarding-image-uploader--with-text ${u&&"nfd-onboarding-image-uploader--with-text--on-drag"} ${_&&"nfd-onboarding-image-uploader--with-text--not-dashed"}`,onDrop:e=>(e=>{var t,a,n,i,o;e.preventDefault(),e.stopPropagation(),c(!1),null!=e&&null!==(t=e.dataTransfer)&&void 0!==t&&t.files&&(null==e||null===(a=e.dataTransfer)||void 0===a?void 0:a.files.length)>0&&"image"===(null==e||null===(n=e.dataTransfer)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.type.split("/")[0])&&g(null==e||null===(o=e.dataTransfer)||void 0===o?void 0:o.files[0])})(e),onDragOver:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!0)})(e),onDragEnter:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!0)})(e),onDragLeave:e=>(e=>{e.preventDefault(),e.stopPropagation(),c(!1)})(e)},l?(0,n.createElement)(p.Z,null):(0,n.createElement)(n.Fragment,null,!_&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__heading"},(0,n.createElement)("div",{className:v()("nfd-onboarding-image-uploader--with-text__heading__icon",o===d.qx?"nfd-onboarding-image-uploader--with-text__heading__icon--light":null)}),(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__heading__text"},(0,n.createElement)("span",{className:"nfd-onboarding-image-uploader--with-text__heading__text__drop"},(0,r.__)("Drop your logo here, or ","wp-module-onboarding")),(0,n.createElement)("button",{onClick:()=>{null==i||i.current.click()},className:"nfd-onboarding-image-uploader--with-text__heading__text__modal"},(0,r.__)("browse","wp-module-onboarding")),(0,n.createElement)("input",{className:"nfd-onboarding-image-uploader--with-text__heading__text__input",accept:"image/*",type:"file",ref:i,onChange:e=>{var t,a,n;null!=e&&null!==(t=e.target)&&void 0!==t&&t.files&&(null==e||null===(a=e.target)||void 0===a?void 0:a.files.length)>0&&g(null==e||null===(n=e.target)||void 0===n?void 0:n.files[0])}}))),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__subheading"},(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__subheading__text"},(0,r.__)("supports .jpg, .png, .gif","wp-module-onboarding")))),_&&(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview"},(0,n.createElement)("img",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__image",src:t.url,alt:(0,r.__)("Site Logo Preview","wp-module-onboarding")}),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details"},(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filename"},t.fileName),(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filesize"},w()(t.fileSize))),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset"},(0,n.createElement)("button",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button",onClick:()=>{var e;a({id:0,url:""}),(null==i||null===(e=i.current)||void 0===e?void 0:e.files.length)>0&&(i.current.value="")}},(0,n.createElement)(x.Z,{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button__icon",icon:E.Z}))))))})),S=()=>{const[e,t]=(0,n.useState)(),a=(0,i.useViewportMatch)("small"),{currentData:m}=(0,o.useSelect)((e=>({currentData:e(u.h).getCurrentOnboardingData()}))),{editEntityRecord:p}=(0,o.useDispatch)(l.store),{getEditedEntityRecord:b}=(0,o.useSelect)((e=>e(l.store)),[]),{setFooterNavEnabled:f,setIsHeaderEnabled:v,setSidebarActiveView:h,setHeaderActiveView:w,setDrawerActiveView:x,setCurrentOnboardingData:E}=(0,o.useDispatch)(u.h);(0,n.useEffect)((()=>{var e;if(v(!0),h(!1),w(d.G5),x(!1),0!==(null===(e=m.data.siteLogo)||void 0===e?void 0:e.id))return t(m.data.siteLogo);f(!1),b("root","site")}),[]);const S={heading:(0,r.__)("Do you have a logo you would like to use for this site?","wp-module-onboarding"),imageUploader:{subHeading:(0,r.__)("supports .jpg, .png, .svg","wp-module-onboarding")},buttons:{skip:(0,r.__)("Skip for now","wp-module-onboarding"),next:(0,r.__)("Next","wp-module-onboarding")}};return(0,n.createElement)(g.Z,{isCentered:!0,className:"nfd-onboarding-step--site-gen__site-logo"},(0,n.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container"},(0,n.createElement)(c.Z,{title:S.heading}),(0,n.createElement)(N,{image:e,imageSetter:e=>{const a={...m};a.data.siteLogo.id=e.id,a.data.siteLogo.url=e.url,a.data.siteLogo.fileName=e.fileName,a.data.siteLogo.fileSize=e.fileSize,E(a),f(0!==e.id),p("root","site",void 0,{site_logo:e.id}),t(e)}}),(0,n.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container__buttons"},(0,n.createElement)(s.Z,{callback:()=>(()=>{const e={...m};e.sitegen.siteLogo={id:0,url:"",fileName:"",fileSize:0},E(e),t(void 0),f(!1)})(),className:"nfd-onboarding-step--site-gen__site-logo__container__buttons__skip",text:S.buttons.skip}),a&&(0,n.createElement)(_.Z,{text:S.buttons.next,disabled:void 0===e||0===(null==e?void 0:e.id)}))))}},2964:(e,t,a)=>{a.d(t,{I:()=>r});var n=a(6329),i=a(4704),o=a(6989),l=a.n(o);async function r(e){const t=await function(e){return new Promise(((t,a)=>{const n=new FileReader;n.addEventListener("loadend",(e=>t(e.target.result))),n.addEventListener("error",a),n.readAsArrayBuffer(e)}))}(e),a={"Content-Type":"image/png"};return a["Content-Disposition"]="attachment; filename="+e.name,await(0,n.D)(l()({url:(0,i.$L)("media"),method:"POST",headers:a,body:t}))}},9830:e=>{e.exports=function(e,t){return"string"==typeof e?l(e):"number"==typeof e?o(e,t):null},e.exports.format=o,e.exports.parse=l;var t=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function o(e,i){if(!Number.isFinite(e))return null;var o=Math.abs(e),l=i&&i.thousandsSeparator||"",r=i&&i.unitSeparator||"",d=i&&void 0!==i.decimalPlaces?i.decimalPlaces:2,s=Boolean(i&&i.fixedDecimals),u=i&&i.unit||"";u&&n[u.toLowerCase()]||(u=o>=n.tb?"TB":o>=n.gb?"GB":o>=n.mb?"MB":o>=n.kb?"KB":"B");var c=(e/n[u.toLowerCase()]).toFixed(d);return s||(c=c.replace(a,"$1")),l&&(c=c.replace(t,l)),c+r+u}function l(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,a=i.exec(e),o="b";return a?(t=parseFloat(a[1]),o=a[4].toLowerCase()):(t=parseInt(e,10),o="b"),Math.floor(n[o]*t)}}}]);