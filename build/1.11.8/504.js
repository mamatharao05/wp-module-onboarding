"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[504],{1760:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(9307),i=n(4184),o=n.n(i);const r=e=>{let{className:t="",size:n,colGap:i=0,children:r}=e;return(0,a.createElement)("div",{className:o()("nfd-onboarding-grid",t),style:{gridTemplateColumns:`repeat(${n}, 1fr)`,gridColumnGap:`${i}px`}},r)}},5504:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(9307),i=n(5634),o=n(9250),r=n(9818),s=n(4403),c=n(2200),l=n(1984),_=n(2395),d=n(5736),v=n(8797);const g=e=>{let{className:t="nfd-onboarding-live-preview--sitegen-card",slug:n,title:i,blockGrammer:o,styling:r,isFavorite:s=!1,viewportWidth:c,previewSettings:g,skeletonLoadingTime:m=2500,onFavorite:p,onRegenerate:u,onPreview:f}=e;const b=()=>"function"==typeof p&&p(n),w=()=>"function"==typeof u&&u(n),h=()=>"function"==typeof f&&f(n);return(0,a.createElement)("div",{className:t},(0,a.createElement)("div",{className:`${t}__live-preview-container`},(0,a.createElement)(v.i5,{styling:r,blockGrammer:o,viewportWidth:c,previewSettings:g,skeletonLoadingTime:m}),(0,a.createElement)("div",{className:`${t}__live-preview-container__overlay`,role:"button",tabIndex:0,onClick:()=>h(),onKeyDown:()=>h()},(0,a.createElement)("div",{className:`${t}__live-preview-container__overlay__preview-button`},(0,a.createElement)(l.Z,{icon:_.Z,className:`${t}__live-preview-container__overlay__preview-button__icon`}),(0,a.createElement)("p",{className:`${t}__live-preview-container__overlay__preview-button__text`},(0,d.__)("Preview","wp-module-onboarding"))))),(0,a.createElement)("div",{className:`${t}__buttons`},(0,a.createElement)("div",{className:`${t}__buttons__favorite`},(0,a.createElement)("div",{className:`${t}__buttons__favorite__icon ${s&&`${t}__buttons__favorite__icon__fill`}`,role:"button",tabIndex:0,onClick:()=>b(),onKeyDown:()=>b()}),(0,a.createElement)("div",{className:`${t}__buttons__favorite__text`},i)),(0,a.createElement)("div",{className:`${t}__buttons__regenerate`,role:"button",tabIndex:0,onClick:()=>w(),onKeyDown:()=>w()},(0,a.createElement)("div",{className:`${t}__buttons__regenerate__icon`}),(0,a.createElement)("div",{className:`${t}__buttons__regenerate__text`},(0,d.__)("Regenerate","wp-module-onboarding")))))};var m=n(4893),p=n(1639),u=n(7625),f=n(2819),b=n(1760),w=n(5289);const h=()=>{const e=(0,o.s0)(),[t,n]=(0,a.useState)(),[l,_]=(0,a.useState)({}),[v,h]=(0,a.useState)([]),{setIsHeaderEnabled:E,setSidebarActiveView:y,setHeaderActiveView:N,setDrawerActiveView:k,setCurrentOnboardingData:$}=(0,r.useDispatch)(s.h),{currentData:x,nextStep:D}=(0,r.useSelect)((e=>({currentData:e(s.h).getCurrentOnboardingData(),nextStep:e(s.h).getNextStep()})));(0,a.useEffect)((()=>{E(!0),y(!1),N(c.G5),k(!1),(async()=>{let e={};const t=function(e,t){const n=Object.keys(t).sort();return e.forEach(((e,a)=>{const i=n[a];t[i]&&(e.content=t[i])})),e}((0,m.n)(),l);if((0,f.isEmpty)(x.sitegen.homepages.data)){const n=(0,p.Kj)();t.forEach(((e,t)=>{if(null==e||!e.color){const a=Object.keys(n),i=a[t%a.length];e.color={slug:i,palette:n[i]}}})),t.forEach((t=>{e[t.slug]=t})),x.sitegen.homepages.data=e,$(x)}else e=x.sitegen.homepages.data;const a=await(0,u.oC)();h(a.body),n(e)})()}),[l]),(0,a.useEffect)((()=>{(async()=>{var e;if(""!==(null===(e=x.sitegen.siteDetails)||void 0===e?void 0:e.prompt))try{const e=await(0,w.d5)(x.sitegen.siteDetails.prompt,!1),t={};for(const n in e.body)t[n]=e.body[n].filter((e=>null!==e)).join(" ");_(t)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const C=e=>{if(!(e in t))return!1;t[e].favorite=!t[e].favorite,x.sitegen.homepages.data=t,$(x)},S=n=>{if(!(n in t))return!1;t[n].active=!t[n].active,x.sitegen.homepages.active=t[n],$(x),e(D.path)},O=e=>{if(!(e in t))return!1;const a={...t},i=(0,m.s)({...a[e]});a[i.slug]=i,n(a),x.sitegen.homepages.data=a,$(x)},G={heading:(0,d.__)("Presto, here are 3 versions","wp-module-onboarding"),subheading:(0,d.__)("We've created 3 unique website designs for you to start with, preview click around or start over.","wp-module-onboarding"),favoriteInfo:(0,d.__)("Favorite a generated version to find and use again in the future.","wp-module-onboarding")};return(0,a.createElement)(i.Z,{isCentered:!0,className:"nfd-onboarding-step--site-gen__preview"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__context"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__context__heading"},G.heading),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__context__subheading"},G.subheading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__live_previews"},t&&v&&(0,a.createElement)(b.Z,{size:3},t&&v&&Object.keys(t).map((e=>{const n=t[e],i=(0,f.cloneDeep)(v[0]);return i.settings.color.palette=n.color.palette,(0,a.createElement)(g,{key:e,viewportWidth:1300,slug:e,title:n.title,isFavorite:n.favorite,skeletonLoadingTime:2500,previewSettings:i,styling:"custom",blockGrammer:n.content,onFavorite:C,onPreview:S,onRegenerate:O})})))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__favorite-info"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__favorite-info__icon"}),(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__favorite-info__text"},G.favoriteInfo)))}}}]);